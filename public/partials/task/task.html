<div class="col-md-offset-0 main">
    <div class="page-header clearfix">
        <h1 class="pull-left" style="margin: 0;">任务管理</h1>
    </div>

    <div class="tabs">
        <ul class="nav nav-tabs">
            <li ng-class="activeTab(env.id)" ng-click="chooseEnv(env.id)" ng-repeat="env in envs"><a href="">{{env.name}}</a></li>
        </ul>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover table-fixed">
            <thead>
            <tr>
                <th width="15%">项目名称</th>
                <th width="10%"></th>
                <th width="55%">状态</th>
                <th width="5%"></th>
                <th width="15%">操作</th>
            </tr>
            </thead>
            <tbody>

            <tr ng-repeat="pro in projectStatus">
                <td>
                    {{pro.name}}
                </td>
                <td>
                    <a title="查看任务队列" ng-click="goTaskQueue(activeEnv, pro.id)" href="">
                        <span class="glyphicon glyphicon-random" style="float: right">&nbsp;{{pro.task.queueNum}}&nbsp;</span>
                    </a>
                    <a>
                        <span class="glyphicon glyphicon-time" style="float: right">&nbsp;0&nbsp;</span>
                    </a>
                </td>
                <td style="padding:10px 0px 0px 0px;">
                    <a ng-show="showHref(pro.task.status)" ng-click="goTaskLog(pro.task.id)" href="">{{pro.task.endTime}}  {{pro.task.statusTip}}!   <span ng-show="showVersionTitle(pro.task.version)">版本号：</span>{{pro.task.version}}   <span ng-show="showTaskNameTitle(pro.task.taskName)">任务:</span> {{pro.task.taskName}}</a>
                    <span ng-show="showText(pro.task.status)">{{pro.task.endTime}}  {{pro.task.statusTip}}!   <span ng-show="showVersionTitle(pro.task.version)">版本号：</span>{{pro.task.version}}   <span ng-show="showTaskNameTitle(pro.task.taskName)">任务:</span> {{pro.task.taskName}}</span>
                    <div>
                        <span ng-show="showProgress(pro.task.status)" >机器 {{pro.task.command.machine}}  {{pro.task.statusTip}} : {{pro.task.command.sls}} </span>

                    </div>
                    <div ng-show="showProgress(pro.task.status)" class="progress progress-mb">
                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{pro.task.currentNum*100/pro.task.totalNum}}%;">
                        </div>
                    </div>

                </td>
                <td>
                    <a ng-show="showProgress(pro.task.status)" title="终止本次任务" href="" ng-click="forceTerminate(pro.id)"><span class="glyphicon glyphicon-remove"></span></a>
                </td>
                <!-- operate -->
                <td class="show">
                    <div class="dropdown">
                        <a ng-repeat="t in pro.templates" class="dropdown-toggle" href="" ng-click="showClick(t.versionMenu, pro.id, t.id)" title="{{t.name}}">
                            <span class="{{t.css}}"></span>
                        </a>
                        <ul class="dropdown-menu" ng-show="showVersionMenu()">
                            <li ng-repeat="vs in versions">
                                <a href="" class="dropdown-toggle" ng-click="deploy(pro.id, vs.id)">{{vs.vs}}</a>
                            </li>
                            <li>
                                <a href="" ng-click="">more ...</a>
                            </li>
                        </ul>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>